(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{184:function(t,s,a){"use strict";a.r(s);var e=a(0),r=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("此文档主要针对不是使用 Steamer 系列的脚手架进行迁移，让老旧项目也能使用上更新的技术。")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("旧式的项目脚手架，一般都是以目录来划分的，非常死板。但 Steamer 系列脚手架，主要是基于入口文件的，因此升级替换比较方便。")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("至于 HTML 的资源引用， 此处是采用了 "),a("a",{attrs:{href:"https://github.com/lcxfs1991/html-res-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("html-res-webpack-plugin"),a("OutboundLink")],1),t._v(" 插件，主要的引用方式是路径匹配。（如果英文不好，可以看"),a("a",{attrs:{href:"https://github.com/lcxfs1991/html-res-webpack-plugin/blob/v3/README_ZH.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文文档"),a("OutboundLink")],1),t._v("）。")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),a("p",[t._v("然后你就可以像如下一样引用（记得加上后缀名）：")]),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),a("p",[t._v("假设资源目录如下：")]),t._v(" "),t._m(11),a("p",[t._v("那你可以像如下一样匹配资源：")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),a("p",[t._v("插件也支持，你按相对路径来内联资源，假设资源目录如下：")]),t._v(" "),t._m(16),a("p",[t._v("你可以这样内联：")]),t._v(" "),t._m(17),t._m(18),t._v(" "),t._m(19),t._v(" "),a("p",[t._v("然后配置下面资源，那么开发环境的时候会引入第一条资源，而生产环境则只会引入第二条。")]),t._v(" "),t._m(20),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),a("p",[t._v("以上所支持的各种样式的合图，Steamer 系列脚手架都支持。同时提供了 "),a("code",[t._v("1倍图(normal)")]),t._v(", "),a("code",[t._v("2倍图(retinaonly)")]),t._v(" 和 "),a("code",[t._v("同时生成1和2倍(retina)")]),t._v("。不过请记得同时要设置一下 "),a("code",[t._v("spriteStyle")]),t._v("。目前仅支持同一项目中一种样式的合图。更多文档，请参考"),a("router-link",{attrs:{to:"/docs/projectkits/Style-Sprites.html"}},[t._v("样式与合图")]),t._v("。")],1),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"非steamer系列脚手架项目迁移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非steamer系列脚手架项目迁移","aria-hidden":"true"}},[this._v("#")]),this._v(" 非Steamer系列脚手架项目迁移")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-对象","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 对象")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_2-入口文件，html"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-入口文件，html","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 入口文件，HTML")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("Steamer 系列脚手架，预先做了约定，一般都将页面，放在 "),a("code",[t._v("src/page")]),t._v(" 下面，每个页面对应一个文件夹，入口文件一般是 "),a("code",[t._v("main.js")]),t._v(", 而对应的 HTML 文件，则是 "),a("code",[t._v("main.html")]),t._v("。如果你有更定制化的需求，可以在 "),a("code",[t._v("config/project.js")]),t._v(" 中的 "),a("code",[t._v("webpack.entry")]),t._v(" 和 "),a("code",[t._v("webpack.html")]),t._v(" 中做相应的改动。默认 Steamer 脚手架都帮你做好自动扫描，只要你按照名字规范放到对应的目录位置即可。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_3-资源引用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-资源引用","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 资源引用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-1-webpack-入口文件及相关引用的资源引用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-webpack-入口文件及相关引用的资源引用","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.1 webpack 入口文件及相关引用的资源引用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("虽然该插件也支持像 "),s("code",[this._v("html-webpack-plugin")]),this._v(" 那样的配置注入方式，但更建议采取资源匹配的方式，这是该插件的特色。运行的时候，插件会在命令行输出，哪些由 "),s("code",[this._v("webpack")]),this._v(" 生成的 "),s("code",[this._v("chunk")]),this._v(" 可以提供给你作为引用的资源，例如：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("===")]),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v("html"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("res"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("webapck"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),a("span",{attrs:{class:"token operator"}},[t._v("===")]),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v("\nchunk1"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" commons"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\nchunk2"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" js"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\nchunk3"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" js"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("css\nchunk4"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" js"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("list"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\nchunk5"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" js"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("list"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("css\nchunk6"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" js"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\nchunk7"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" js"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("css\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("asycn")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("defer")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("js/react.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("asycn")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("defer")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("js/index.css"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-2-通过-copy-webpack-plugin-hash-拷贝的资源引用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-通过-copy-webpack-plugin-hash-拷贝的资源引用","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.2 通过 copy-webpack-plugin-hash 拷贝的资源引用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("有些资源，你是不想通过 webpack 编译打包而直接拷贝的。Steamer 系列脚手架默认将 "),s("code",[this._v("src/libs")]),this._v(" 下面的文件直接拷贝到开发或者生产目录。当然，你也可以在 "),s("code",[this._v("config/project")]),this._v(" 中配置 "),s("code",[this._v("webpack.static")]),this._v("，添加更多直接拷贝的目录。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" src\n  "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n  "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" libs\n  "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("    "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" react"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("script asycn defer src"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"./libs/react.js"')]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-3-资源内联"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-资源内联","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.3 资源内联")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可以直接在原有资源引用的后面添加 "),s("code",[this._v("?__inline")]),this._v("：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("script asycn defer src"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"./libs/react.js?__inline"')]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" src\n  "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n  "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" libs\n  "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("    "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" react"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n  "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" css\n  "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("    "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("css\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("script asycn defer src"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"./libs/react.js?__inline"')]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("link asycn defer rel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"stylesheet"')]),t._v(" href"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"./css/index.css?__inline"')]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-4-根据环境引用资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-根据环境引用资源","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.4 根据环境引用资源")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("你可能会想在开发环境和生产环境，分别去引用不同的资源，你可以先在插件参数中，给 "),s("code",[this._v("options.env")]),this._v(" 传入当前环境变量("),s("code",[this._v("development")]),this._v(" 或 "),s("code",[this._v("production")]),this._v(")。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("script asycn defer src"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"libs/react.js?__development"')]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("link asycn defer rel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"stylesheet"')]),t._v(" href"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"./css/index.css?__production"')]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_4-样式与模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-样式与模板","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. 样式与模板")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("Steamer 系列脚手架中，默认是使用 "),a("code",[t._v("Less")]),t._v(" 作为样式预处理器，但并没有采取哪个模板作为默认开启的模板。但许多老旧项目中，有各式各样的样式与模板需要兼容。放心， Steamer 脚手架对市面上大部份主流的样式编译器与模板都有所支持，你可以到 "),a("code",[t._v("config.project")]),t._v(" 中，去配置 "),a("code",[t._v("webpack.style")]),t._v(" 和 "),a("code",[t._v("webpack.template")]),t._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("目前样式预变异器支持 "),a("code",[t._v("sass")]),t._v(", "),a("code",[t._v("scss")]),t._v(", "),a("code",[t._v("less")]),t._v(", "),a("code",[t._v("stylus")]),t._v("，而模板则支持 "),a("code",[t._v("pug")]),t._v("(原本叫 "),a("code",[t._v("jade")]),t._v("), "),a("code",[t._v("handlebars")]),t._v(" 和 "),a("code",[t._v("ejs")]),t._v("。 配置好后，重新 "),a("code",[t._v("npm start")]),t._v("，会自动帮你安装相关依赖。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_5-合图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-合图","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. 合图")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("h2",{attrs:{id:"_6-import-require-export-和-module-exports"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-import-require-export-和-module-exports","aria-hidden":"true"}},[t._v("#")]),t._v(" 6. "),a("code",[t._v("import")]),t._v(", "),a("code",[t._v("require")]),t._v(", "),a("code",[t._v("export")]),t._v(" 和 "),a("code",[t._v("module.exports")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("webpack 3")]),this._v(" 以后，模块导出的时候，就不再支持 "),s("code",[this._v("export")]),this._v(" 和 "),s("code",[this._v("module.exports")]),this._v(" 在同一文件中混用了，因此如果你改造的项目中有这种情况，可能会报错。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("同时 "),s("code",[this._v("require")]),this._v(" 默认模块的时候，记得在后面补上 "),s("code",[this._v("default")]),this._v("， 如 "),s("code",[this._v("require('xxx').default")]),this._v("。")])}],!1,null,null,null);r.options.__file="Migration.md";s.default=r.exports}}]);