(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{175:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("并行或串行执行自定义任务")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/steamer-plugin-task",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/npm/v/steamer-plugin-task.svg?style=flat",alt:"NPM Version"}}),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://travis-ci.org/steamerjs/steamer-plugin-task",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/travis/steamerjs/steamer-plugin-task.svg",alt:"Travis"}}),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://img.shields.io/steamerjs/steamer-plugin-task",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://david-dm.org/steamerjs/steamer-plugin-task.svg",alt:"Deps"}}),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://coveralls.io/github/steamerjs/steamer-plugin-task",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/coveralls/steamerjs/steamer-plugin-task.svg",alt:"Coverage"}}),a("OutboundLink")],1)]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._m(5),t._v(" "),t._m(6)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"steamer-plugin-task"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#steamer-plugin-task","aria-hidden":"true"}},[this._v("#")]),this._v(" steamer-plugin-task")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"添加任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加任务","aria-hidden":"true"}},[this._v("#")]),this._v(" 添加任务")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("steamer task "),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("add "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("task name"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 如：")]),t._v("\nsteamer task "),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("add alloyteam\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 1. 全局安装 steamer-task-alloyteam")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 2. 将 steamer-task-alloyteam 里的 .steamer 内容全数拷贝到项目的 .steamer内")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 3. 安装 steamer-task-alloyteam 任务所需依赖到项目中")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"任务配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 任务配置")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 自动生成配置")]),t._v("\nsteamer task\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// .steamer/steamer-plugin-task.js")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/**\n * 如果 task 是一个文件路径字符串，并且存在，文件会被 require 之后，执行\n * 如果 task 是字符串且中间有空格分割，task 会被解析成命令行，直接用 spawn 执行\n */")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"plugin"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"steamer-plugin-task"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"config"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// 用对象写法是并行运行命令")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"dev"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"steamer list"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"cde.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// 用数组写法是串行运行命令")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"dist"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"steamer kit -l"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"bcd.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"abc.js"')]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// .steamer/task")]),t._v("\ntask\n "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" abc"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" bcd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" cde"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v(" def"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 并行任务")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// cde.js")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'cde'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// def.js")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'def'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 串行任务")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// bcd.js")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'bcd'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// abc.js, 最后一个任务无须执行next")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'abc'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"并行或串行运行任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#并行或串行运行任务","aria-hidden":"true"}},[this._v("#")]),this._v(" 并行或串行运行任务")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 并行运行 dev 的命令")]),t._v("\nsteamer task dev\nstart running task"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" steamer list\nstart running task"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cde"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n"),a("span",{attrs:{class:"token comment"}},[t._v("// output from node cde.js")]),t._v("\nfinishing task"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cde"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n"),a("span",{attrs:{class:"token comment"}},[t._v("// output from steamer list")]),t._v("\nfinishing task"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" steamer list\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 串行运行 dist 的命令")]),t._v("\nstart running task"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" steamer kit "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("l\n"),a("span",{attrs:{class:"token comment"}},[t._v("// output from steamer list")]),t._v("\nsteamer task dist\nstart running task"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bcd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 1 second later")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// output from node bcd.js")]),t._v("\nstart running task"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" abc"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n"),a("span",{attrs:{class:"token comment"}},[t._v("// out from node abc.js")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="Steamer-Plugin-Task.md";s.default=e.exports}}]);